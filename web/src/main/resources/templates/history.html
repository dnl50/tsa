<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head (#{history.page-title})"></head>

<body>

<div th:replace="fragments/navbar.html :: navbar"></div>

<div class="container">

    <table id="history" class="table table-striped table-responsive">
        <thead>
        <tr>
            <th th:text="#{history.column.serial}">Serial</th>
            <th th:text="#{history.column.algorithm}">Algorithm</th>
            <th th:text="#{history.column.status}">Status</th>
            <th th:text="#{history.column.status-string}">Status String</th>
            <th>
                <span th:text="#{history.column.reception-time}">Reception Time</span>
                <i class="bi bi-question-circle" data-bs-toggle="tooltip" data-bs-placement="top"
                   th:title="#{history.column.reception-time.description}"></i>
            </th>
        </tr>
        </thead>
    </table>

</div>

<script th:inline="javascript">
    $(document).ready(function () {
        $('table#history').DataTable({
            "searching": false,
            "processing": true,
            "serverSide": true,
            "ajax": {
                "url": "[(@{/api/history})]",
                "type": "POST",
                "dataType": "json",
                "contentType": "application/json",
                "data": function (d) {
                    return JSON.stringify(d);
                }
            },
            "columns": [
                {"data": "serialNumber"},
                {"data": "request.hashAlgorithm"},
                {"data": "status"},
                {"data": "statusString"},
                {"data": "receptionTime"},
            ]
        });
    });
</script>

<script th:replace="fragments/tooltip-initializer :: tooltip-initializer"></script>

</body>
</html>
